function cov_1hj5mr7il7(){var path="D:\\repository\\mychat\\chatserver\\controller\\captcha.js";var hash="ce5fea5770a56dc49220e41c5956d915a6a3db9d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\repository\\mychat\\chatserver\\controller\\captcha.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:41}},"1":{start:{line:2,column:15},end:{line:2,column:35}},"2":{start:{line:4,column:16},end:{line:13,column:1}},"3":{start:{line:5,column:17},end:{line:8,column:6}},"4":{start:{line:9,column:4},end:{line:9,column:56}},"5":{start:{line:10,column:4},end:{line:10,column:40}},"6":{start:{line:11,column:4},end:{line:11,column:20}},"7":{start:{line:12,column:4},end:{line:12,column:36}},"8":{start:{line:15,column:0},end:{line:17,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:16},end:{line:4,column:17}},loc:{start:{line:4,column:30},end:{line:13,column:1}},line:4}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ce5fea5770a56dc49220e41c5956d915a6a3db9d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1hj5mr7il7=function(){return actualCoverage;};return actualCoverage;}cov_1hj5mr7il7();const svgCaptcha=(cov_1hj5mr7il7().s[0]++,require("svg-captcha"));const config=(cov_1hj5mr7il7().s[1]++,require('../config'));cov_1hj5mr7il7().s[2]++;const captcha=(req,res)=>{cov_1hj5mr7il7().f[0]++;const code=(cov_1hj5mr7il7().s[3]++,svgCaptcha.create({noise:2,ignoreChars:'0o1i'}));cov_1hj5mr7il7().s[4]++;req.session.captcha=code.text.toLocaleLowerCase();// session 存储
cov_1hj5mr7il7().s[5]++;config.captcha=req.session.captcha;cov_1hj5mr7il7().s[6]++;res.type('svg');// 响应的类型
cov_1hj5mr7il7().s[7]++;res.status(200).send(code.data);};cov_1hj5mr7il7().s[8]++;module.exports={captcha};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcHRjaGEuanMiXSwibmFtZXMiOlsic3ZnQ2FwdGNoYSIsInJlcXVpcmUiLCJjb25maWciLCJjYXB0Y2hhIiwicmVxIiwicmVzIiwiY29kZSIsImNyZWF0ZSIsIm5vaXNlIiwiaWdub3JlQ2hhcnMiLCJzZXNzaW9uIiwidGV4dCIsInRvTG9jYWxlTG93ZXJDYXNlIiwidHlwZSIsInN0YXR1cyIsInNlbmQiLCJkYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IjIyQ0FBQSxLQUFNQSxDQUFBQSxVQUFVLDBCQUFHQyxPQUFPLENBQUMsYUFBRCxDQUFWLENBQWhCLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBR0QsT0FBTyxDQUFDLFdBQUQsQ0FBVixDQUFaLEMsd0JBRUEsS0FBTUUsQ0FBQUEsT0FBTyxDQUFHLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixHQUFjLHlCQUMxQixLQUFNQyxDQUFBQSxJQUFJLDBCQUFHTixVQUFVLENBQUNPLE1BQVgsQ0FBa0IsQ0FDM0JDLEtBQUssQ0FBRSxDQURvQixDQUUzQkMsV0FBVyxDQUFFLE1BRmMsQ0FBbEIsQ0FBSCxDQUFWLENBRDBCLHdCQUsxQkwsR0FBRyxDQUFDTSxPQUFKLENBQVlQLE9BQVosQ0FBc0JHLElBQUksQ0FBQ0ssSUFBTCxDQUFVQyxpQkFBVixFQUF0QixDQUFxRDtBQUwzQix3QkFNMUJWLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQkMsR0FBRyxDQUFDTSxPQUFKLENBQVlQLE9BQTdCLENBTjBCLHdCQU8xQkUsR0FBRyxDQUFDUSxJQUFKLENBQVMsS0FBVCxFQUFpQjtBQVBTLHdCQVExQlIsR0FBRyxDQUFDUyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJULElBQUksQ0FBQ1UsSUFBMUIsRUFDSCxDQVRELEMsd0JBV0FDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiZixPQURhLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3ZnQ2FwdGNoYSA9IHJlcXVpcmUoXCJzdmctY2FwdGNoYVwiKTtcclxuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJylcclxuXHJcbmNvbnN0IGNhcHRjaGEgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGNvZGUgPSBzdmdDYXB0Y2hhLmNyZWF0ZSh7XHJcbiAgICAgICAgbm9pc2U6IDIsXHJcbiAgICAgICAgaWdub3JlQ2hhcnM6ICcwbzFpJ1xyXG4gICAgfSk7XHJcbiAgICByZXEuc2Vzc2lvbi5jYXB0Y2hhID0gY29kZS50ZXh0LnRvTG9jYWxlTG93ZXJDYXNlKCk7IC8vIHNlc3Npb24g5a2Y5YKoXHJcbiAgICBjb25maWcuY2FwdGNoYSA9IHJlcS5zZXNzaW9uLmNhcHRjaGFcclxuICAgIHJlcy50eXBlKCdzdmcnKTsgLy8g5ZON5bqU55qE57G75Z6LXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChjb2RlLmRhdGEpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNhcHRjaGFcclxufVxyXG4iXX0=